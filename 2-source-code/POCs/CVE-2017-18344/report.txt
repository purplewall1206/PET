not accurate


[   30.547445] ==================================================================
[   30.547949] BUG: KASAN: use-after-free in vid_cap_buf_queue+0xa2/0xc0
[   30.548387] Write of size 8 at addr ffff88800b0db3a8 by task poc/1148
[   30.548824] 
[   30.548934] CPU: 1 PID: 1148 Comm: poc Tainted: G        W         5.15.0-detector-kasan #1
[   30.549535] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   30.550102] Call Trace:
[   30.550285]  dump_stack_lvl+0x34/0x44
[   30.550558]  print_address_description.constprop.0+0x21/0x140
[   30.550959]  ? vid_cap_buf_queue+0xa2/0xc0
[   30.551246]  ? vid_cap_buf_queue+0xa2/0xc0
[   30.551555]  kasan_report.cold+0x83/0xdf
[   30.551838]  ? vid_cap_buf_queue+0xa2/0xc0
[   30.552156]  vid_cap_buf_queue+0xa2/0xc0
[   30.552450]  vb2_start_streaming+0x3c/0x1d0
[   30.552787]  vb2_core_streamon+0xad/0x100
[   30.553067]  __vb2_init_fileio+0x42c/0x460
[   30.553448]  __vb2_perform_fileio+0x5ef/0x6c0
[   30.553758]  ? _raw_spin_lock+0x7a/0xd0
[   30.554027]  ? vb2_core_dqbuf+0x740/0x740
[   30.554325]  ? __mutex_lock_interruptible_slowpath+0x10/0x10
[   30.554702]  ? __fsnotify_update_child_dentry_flags+0x1a0/0x1a0
[   30.555126]  vb2_fop_read+0x111/0x1b0
[   30.555408]  v4l2_read+0x113/0x130
[   30.555718]  vfs_read+0xc8/0x260
[   30.556008]  ksys_read+0xb9/0x150
[   30.556305]  ? vfs_write+0x390/0x390
[   30.556625]  ? fpregs_assert_state_consistent+0x52/0x60
[   30.557100]  ? exit_to_user_mode_prepare+0x35/0x150
[   30.557547]  do_syscall_64+0x3b/0x90
[   30.557845]  entry_SYSCALL_64_after_hwframe+0x44/0xae
[   30.558282] RIP: 0033:0x7f03d144c08c
[   30.558614] Code: ec 28 48 89 54 24 18 48 89 74 24 10 89 7c 24 08 e8 89 fc ff ff 48 8b 54 24 18 48 8b 74 24 10 41 89 c0 8b 7c 24 08 31 c0 0f 05 <48> 3d 00 f0 ff ff 8
[   30.560250] RSP: 002b:00007f03cfa6ee00 EFLAGS: 00000246 ORIG_RAX: 0000000000000000
[   30.560916] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f03d144c08c
[   30.561533] RDX: 0000000000fffded RSI: 00007f03d0271000 RDI: 0000000000000004
[   30.562038] RBP: 00007f03cfa6eef0 R08: 0000000000000000 R09: 0000000000000026
[   30.562546] R10: 0000000000000000 R11: 0000000000000246 R12: 00007ffe062ca72e
[   30.563051] R13: 00007ffe062ca72f R14: 00007f03cfa6efc0 R15: 0000000000802000
[   30.563557] 
[   30.563673] Allocated by task 1148:
[   30.563927]  kasan_save_stack+0x1b/0x40
[   30.564206]  __kasan_kmalloc+0x7c/0x90
[   30.564476]  __vb2_queue_alloc+0xa6/0x690
[   30.564766]  vb2_core_reqbufs+0x40f/0x610
[   30.565057]  __vb2_init_fileio+0x179/0x460
[   30.565364]  __vb2_perform_fileio+0x5ef/0x6c0
[   30.565677]  vb2_fop_read+0x111/0x1b0
[   30.565976]  v4l2_read+0x113/0x130
[   30.566268]  vfs_read+0xc8/0x260
[   30.566548]  ksys_read+0xb9/0x150
[   30.566833]  do_syscall_64+0x3b/0x90
[   30.567072]  entry_SYSCALL_64_after_hwframe+0x44/0xae
[   30.567406] 
[   30.567510] Freed by task 1147:
[   30.567722]  kasan_save_stack+0x1b/0x40
[   30.567980]  kasan_set_track+0x1c/0x30
[   30.568233]  kasan_set_free_info+0x20/0x30
[   30.568507]  __kasan_slab_free+0xea/0x120
[   30.568774]  kfree+0x90/0x220
[   30.568977]  __vb2_queue_free+0x27b/0x370
[   30.569269]  vb2_core_reqbufs+0x146/0x610
[   30.569614]  __vb2_cleanup_fileio+0x72/0x90
[   30.569914]  vb2_core_queue_release+0x17/0x50
[   30.570222]  _vb2_fop_release+0xe8/0x110
[   30.570518]  v4l2_release+0x116/0x190
[   30.570772]  __fput+0x104/0x400
[   30.570980]  task_work_run+0x97/0xd0
[   30.571219]  exit_to_user_mode_prepare+0x14d/0x150
[   30.571547]  syscall_exit_to_user_mode+0x1d/0x40
[   30.571864]  do_syscall_64+0x48/0x90
[   30.572128]  entry_SYSCALL_64_after_hwframe+0x44/0xae
[   30.572478] 
[   30.572585] The buggy address belongs to the object at ffff88800b0db000
[   30.572585]  which belongs to the cache kmalloc-1k of size 1024
[   30.573495] The buggy address is located 936 bytes inside of
[   30.573495]  1024-byte region [ffff88800b0db000, ffff88800b0db400)
[   30.576603] The buggy address belongs to the page:
[   30.577024] page:0000000036d2f892 refcount:1 mapcount:0 mapping:0000000000000000 index:0x0 pfn:0xb0d8
[   30.578010] head:0000000036d2f892 order:3 compound_mapcount:0 compound_pincount:0
[   30.578665] flags: 0x100000000010200(slab|head|node=0|zone=1)
[   30.579177] raw: 0100000000010200 0000000000000000 dead000000000122 ffff888005841dc0
[   30.579807] raw: 0000000000000000 0000000000100010 00000001ffffffff 0000000000000000
[   30.580422] page dumped because: kasan: bad access detected
[   30.580903] 
[   30.581037] Memory state around the buggy address:
[   30.581470]  ffff88800b0db280: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[   30.582069]  ffff88800b0db300: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[   30.582688] >ffff88800b0db380: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[   30.583291]                                   ^
[   30.583679]  ffff88800b0db400: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[   30.584292]  ffff88800b0db480: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[   30.584894] ==================================================================
[   30.585509] Disabling lock debugging due to kernel taint
[   30.606363] BUG: kernel NULL pointer dereference, address: 0000000000000000
[   30.607045] #PF: supervisor write access in kernel mode
[   30.608632] #PF: error_code(0x0002) - not-present page
[   30.625466] PGD 0 P4D 0 
[   30.625696] Oops: 0002 [#1] SMP KASAN
[   30.631361] CPU: 1 PID: 1154 Comm: vivid-000-vid-c Tainted: G    B   W         5.15.0-detector-kasan #1
[   30.631978] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
[   30.632523] RIP: 0010:memcpy_orig+0x29/0x10f
[   30.632818] Code: 00 48 89 f8 48 83 fa 20 72 7e 40 38 fe 7c 35 48 83 ea 20 48 83 ea 20 4c 8b 06 4c 8b 4e 08 4c 8b 56 10 4c 8b 5e 18 48 8d 76 20 <4c> 89 07 4c 89 4f 3
[   30.634271] RSP: 0018:ffff888009faf978 EFLAGS: 00010206
[   30.634726] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81fb02d0
[   30.635341] RDX: 00000000000004c0 RSI: ffffc90000081020 RDI: 0000000000000000
[   30.636536] RBP: ffffc90000081000 R08: 80b380b380b380b3 R09: 80b380b380b380b3
[   30.638210] R10: 80b380b380b380b3 R11: 80b380b380b380b3 R12: ffffc90000081000
[   30.638849] R13: ffff888009686800 R14: 0000000000000000 R15: 0000000000000000
[   30.639495] FS:  0000000000000000(0000) GS:ffff888036300000(0000) knlGS:0000000000000000
[   30.640193] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.640678] CR2: 0000000000000000 CR3: 000000000ab96000 CR4: 00000000000006e0
[   30.641271] Call Trace:
[   30.641498]  tpg_fill_plane_buffer+0x6c0/0x14f0
[   30.641893]  vivid_fillbuff+0xe06/0x1ae0
[   30.642241]  ? vivid_grab_controls+0x160/0x160
[   30.642614]  ? _raw_spin_lock+0x7a/0xd0
[   30.642939]  ? _raw_read_lock_irq+0x30/0x30
[   30.643294]  ? __update_load_avg_cfs_rq+0x52/0x550
[   30.643699]  ? sched_clock_cpu+0x15/0x100
[   30.644042]  ? _raw_spin_lock+0x7a/0xd0
[   30.644485]  ? _raw_read_lock_irq+0x30/0x30
[   30.644840]  ? vivid_thread_vid_cap_tick+0x5f2/0xdb0
[   30.645259]  vivid_thread_vid_cap_tick+0x5f2/0xdb0
[   30.645670]  ? mutex_lock+0xce/0xe0
[   30.645967]  ? __mutex_lock_slowpath+0x10/0x10
[   30.646339]  vivid_thread_vid_cap+0x2db/0x490
[   30.646713]  ? vivid_thread_vid_cap_tick+0xdb0/0xdb0
[   30.647134]  kthread+0x1d2/0x200
[   30.647412]  ? set_kthread_struct+0x80/0x80
[   30.647768]  ret_from_fork+0x22/0x30
[   30.648083] Modules linked in:
[   30.648354] CR2: 0000000000000000
[   30.648646] ---[ end trace b04dd492ba70c6f5 ]---
[   30.649059] RIP: 0010:memcpy_orig+0x29/0x10f
[   30.649434] Code: 00 48 89 f8 48 83 fa 20 72 7e 40 38 fe 7c 35 48 83 ea 20 48 83 ea 20 4c 8b 06 4c 8b 4e 08 4c 8b 56 10 4c 8b 5e 18 48 8d 76 20 <4c> 89 07 4c 89 4f 3
[   30.650989] RSP: 0018:ffff888009faf978 EFLAGS: 00010206
[   30.651421] RAX: 0000000000000000 RBX: 0000000000000001 RCX: ffffffff81fb02d0
[   30.652000] RDX: 00000000000004c0 RSI: ffffc90000081020 RDI: 0000000000000000
[   30.652593] RBP: ffffc90000081000 R08: 80b380b380b380b3 R09: 80b380b380b380b3
[   30.653179] R10: 80b380b380b380b3 R11: 80b380b380b380b3 R12: ffffc90000081000
[   30.672491] R13: ffff888009686800 R14: 0000000000000000 R15: 0000000000000000
[   30.673109] FS:  0000000000000000(0000) GS:ffff888036300000(0000) knlGS:0000000000000000
[   30.673718] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[   30.674108] CR2: 0000000000000000 CR3: 000000000ab96000 CR4: 00000000000006e0