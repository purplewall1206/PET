#include <sys/socket.h>
#include <linux/nfc.h>
#include <string.h>
#include <memory.h>
#include <unistd.h>
#include <stdio.h>
#include <errno.h>

int main() {
    struct sockaddr_nfc_llcp addr = {0};
    int sock1 = socket( AF_NFC, SOCK_STREAM, NFC_SOCKPROTO_LLCP );
    if (sock1 < 0) {
        perror("sock1");
        return -1;
    }
    int sock2 = socket( AF_NFC, SOCK_STREAM, NFC_SOCKPROTO_LLCP );
    if (sock2 < 0) {
        perror("sock2");
        return -1;
    }
    addr.sa_family = AF_NFC;
    addr.nfc_protocol = NFC_PROTO_NFC_DEP;
    bind( sock1, (struct sockaddr*) &addr, sizeof(struct sockaddr_nfc_llcp) );
    printf("bind sock1\n");
    bind( sock2, (struct sockaddr*) &addr, sizeof(struct sockaddr_nfc_llcp) );
    printf("bind sock2\n");
    close(sock1);
    printf("close sock1\n");
    close(sock2);
    printf("close sock2\n");
    return 0;
}